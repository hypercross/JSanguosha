package application.network.handlers;

import game.entity.Entity;
import hx.Log;
import hx.Traced;
import application.network.EntityUpdate;
import application.network.NetworkManager.Side;
import application.view.EntityViewManager;

@Traced
public class EntityUpdateHandler implements INetworkHandler{

	
	@Override
	public boolean captured(Object obj) {
		return obj instanceof EntityUpdate;
	}

	@Override
	public Object handledWithResponse(Object obj) {
		return null;
	}

	@Override
	public void handled(Object obj) {

		EntityUpdate eu = (EntityUpdate)obj;
		
		Log.o("entity update "+eu.id+"@"+eu.getClass().getName());
		
		if(!Entity.list.containsKey(eu.id))Entity.list.put(eu.id, eu.createClientEntity());
		else eu.update(Entity.list.get(eu.id));
		EntityViewManager.instance.updateEntityView(Entity.list.get(eu.id));
	}

	@Override
	public Side side() {
		return Side.Client;
	}

}
